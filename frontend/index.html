<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Charlotte Luxury Home Estimator</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>Charlotte Luxury Home Estimator</h1>

    <form id="estimateForm">
        <h2>Home Size & Layout</h2>
        <input type="number" id="squareFeet" placeholder="Square Feet" required>
        <input type="number" id="bedrooms" placeholder="Bedrooms" required>
        <input type="number" id="bathrooms" placeholder="Bathrooms" required>
        <input type="number" id="floors" placeholder="Number of Floors" required>
        <label>Basement: <input type="checkbox" id="basement"></label>
        <input type="number" id="garageCars" placeholder="Garage Cars" required>

        <h2>Style & Features</h2>
        <select id="homeStyle">
            <option>Modern</option>
            <option>Colonial</option>
            <option>Craftsman</option>
            <option>Traditional</option>
        </select>
        <select id="roofType">
            <option>Asphalt</option>
            <option>Metal</option>
            <option>Tile</option>
        </select>
        <select id="exteriorFinish">
            <option>Brick</option>
            <option>Stone</option>
            <option>Stucco</option>
            <option>Vinyl</option>
        </select>
        <select id="windowsType">
            <option>Standard</option>
            <option>Double-pane</option>
            <option>Triple-pane</option>
        </select>

        <h2>Interior Finishes</h2>
        <select id="flooring">
            <option>Carpet</option>
            <option>Hardwood</option>
            <option>Tile</option>
            <option>Luxury Vinyl</option>
        </select>
        <select id="kitchenType">
            <option>Standard</option>
            <option>Gourmet</option>
        </select>
        <select id="countertops">
            <option>Granite</option>
            <option>Quartz</option>
            <option>Marble</option>
        </select>
        <select id="appliances">
            <option>Standard</option>
            <option>High-end</option>
        </select>
        <select id="bathroomFinish">
            <option>Standard</option>
            <option>Luxury</option>
            <option>Spa</option>
        </select>

        <h2>Energy & Location</h2>
        <label>Solar Panels: <input type="checkbox" id="solar"></label>
        <select id="smartHome">
            <option>Basic</option>
            <option>Full</option>
        </select>
        <select id="insulation">
            <option>Standard</option>
            <option>High-efficiency</option>
        </select>
        <select id="neighborhood">
            <option>Uptown</option>
            <option>SouthPark</option>
            <option>Ballantyne</option>
            <option>Suburban</option>
            <option>Rural</option>
        </select>
        <input type="number" id="lotSize" placeholder="Lot size (acres)">
        <select id="landscaping">
            <option>Standard</option>
            <option>Custom</option>
        </select>
        <label>Pool: <input type="checkbox" id="pool"></label>
        <label>Deck: <input type="checkbox" id="deck"></label>
        <label>Outdoor Kitchen: <input type="checkbox" id="outdoorKitchen"></label>

        <button type="button" id="getEstimateBtn">Get Estimate</button>
    </form>

    <p id="estimateResult"></p>

    <script>
        document.getElementById("getEstimateBtn").addEventListener("click", async () => {
            const payload = {
                square_feet: parseInt(document.getElementById("squareFeet").value),
                bedrooms: parseInt(document.getElementById("bedrooms").value),
                bathrooms: parseInt(document.getElementById("bathrooms").value),
                floors: parseInt(document.getElementById("floors").value),
                basement: document.getElementById("basement").checked,
                garage_cars: parseInt(document.getElementById("garageCars").value),
                home_style: document.getElementById("homeStyle").value,
                roof_type: document.getElementById("roofType").value,
                exterior_finish: document.getElementById("exteriorFinish").value,
                windows_type: document.getElementById("windowsType").value,
                flooring: document.getElementById("flooring").value,
                kitchen_type: document.getElementById("kitchenType").value,
                countertops: document.getElementById("countertops").value,
                appliances: document.getElementById("appliances").value,
                bathroom_finish: document.getElementById("bathroomFinish").value,
                solar: document.getElementById("solar").checked,
                smart_home: document.getElementById("smartHome").value,
                insulation: document.getElementById("insulation").value,
                neighborhood: document.getElementById("neighborhood").value,
                lot_size: parseFloat(document.getElementById("lotSize").value || 0),
                landscaping: document.getElementById("landscaping").value,
                pool: document.getElementById("pool").checked,
                deck: document.getElementById("deck").checked,
                outdoor_kitchen: document.getElementById("outdoorKitchen").checked,
                extras: []
            };

            const response = await fetch("/estimate", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify(payload)
            });

            const data = await response.json();
            document.getElementById("estimateResult").innerText = `Estimated Cost: $${data.estimate.toLocaleString()}`;
        });
    </script>
</body>
</html>
